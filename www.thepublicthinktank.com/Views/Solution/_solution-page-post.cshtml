@using atlas_the_public_think_tank.Models.ViewModel
@*
    Layout of the main issue card when viewed within ReadSolution.cshtml
    It is not collapsible like the main solution card
*@


@model Solution_ReadVM
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Console.WriteLine();
}

<div class="card mb-3 solution-card" id="@Model.SolutionID" data-content-type="solution">
    <div class="">
        <div class="dial-container" style="float:left">
            @await Html.PartialAsync("~/Views/Shared/Components/_voteDial.cshtml", new UserVote_Generic_ReadVM()
            {
                AverageVote = Model.VoteStats.AverageVote,
                ContentID = Model.VoteStats.ContentID,
                ContentType = Model.VoteStats.ContentType,
                GenericContentVotes = Model.VoteStats.SolutionVotes,
                TotalVotes = Model.VoteStats.TotalVotes
            }))
        </div>

        <div class="card-header" style="border-left:var(--bs-card-border-width) solid var(--bs-card-border-color); border-top-left-radius: 0; margin-left: var(--dial-width)">
            <h5 class="mb-0">
                <div style="font-size:20px;" class="float-end">
                    @await Html.PartialAsync("~/Views/Shared/Components/_scope-ribbon.cshtml", Model.Scope)
                </div>
                <span class="float-start me-2">

                @await Html.PartialAsync("~/Views/Shared/Icons/_Solutions.cshtml")
                </span>
                @* Title and this float need to be next to each other for float styling to work. *@
                @Model.Title
            </h5>
            <small class="text-muted">Posted by @Model.Author?.UserName on @Model.CreatedAt.ToString("MMM dd, yyyy")</small>
        </div>

        <p class="mx-2" style="white-space: pre-wrap">@Model.Content</p>

      @*   @if (Model.Categories != null && Model.Categories.Any())
        {
            <div class="mt-2">
                @foreach (var category in Model.Categories)
                {
                    <span class="badge bg-secondary me-1">@category.CategoryName</span>
                }
            </div>
        } *@    
    </div>
    @await Html.PartialAsync("~/Views/Shared/_Breadcrumb.cshtml", Model.BreadcrumbTags)
    
    <div class="card-footer d-flex justify-content-between">
        <div class="" id="card-@Model.SolutionID-footer-alert">
        </div>
        <div class="">
            <a href="#" class="btn btn-sm btn-outline-secondary bg-success-subtle">Share</a>
            <a href="#" class="btn btn-sm btn-outline-secondary bg-dark-subtle">Follow</a>
        </div>
    </div>
</div>
