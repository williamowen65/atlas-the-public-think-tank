@using System.Security.Claims
@using Microsoft.AspNetCore.Identity
@using atlas_the_public_think_tank.Data.DatabaseEntities.Users
@using atlas_the_public_think_tank.Models.ViewModel.CRUD.Issue
@inject UserManager<AppUser> UserManager


@model Issue_ReadVM

@{

    string? userId = User.FindFirstValue(ClaimTypes.NameIdentifier);
    bool doesUserOwnContent = false;
    AppUser? user = null;
    if (!string.IsNullOrEmpty(userId) && Model.Author != null)
    {
        doesUserOwnContent = Model.Author.Id.ToString() == userId;
        user = await UserManager.GetUserAsync(User);
    }
}

@if (doesUserOwnContent && user != null)
{
    <div class="card mx-5 text-center border-info author-content-alert"
         data-content-type="solution"  data-id="@Model.IssueID" style="border-bottom:0px;border-bottom-left-radius: 0px; border-bottom-right-radius: 0px">
        <div class="card-header" style="border-bottom:0px">
            You are the owner of this issue node.
            <div class="float-end">
                <button data-content-type="issue" data-content-id="@Model.IssueID" class="edit-issue-button border-0 bg-transparent"> <i class="fa fa-edit"></i></button>
            </div>
        </div>
    </div>
}

